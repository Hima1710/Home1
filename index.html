<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام حسابات خالي عادل</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons&display=swap">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>نظام حسابات خالي عادل</h1>
            </div>
            <nav class="nav">
                <button class="nav-toggle" id="navToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="#dashboard" class="nav-link active">الرئيسية</a></li>
                    <li><a href="#income" class="nav-link">الدخل</a></li>
                    <li><a href="#expenses" class="nav-link">المصروفات</a></li>
                    <li><a href="#workers" class="nav-link">العمال</a></li>
                    <li><a href="#returns" class="nav-link">الاسترجاع</a></li>
                                        <li><a href="#summary" class="nav-link">الملخص</a></li>
 
                </ul>
                <button class="btn btn-danger logout-btn" onclick="logout()">
                    <i class="material-icons">logout</i>
                    تسجيل خروج
                </button>
            </nav>
        </div>
    </header>

    <!-- Login Section -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-container">
            <div class="login-header">
                               <i class="material-icons">trending_up</i>
               <h2>تسجيل الدخول</h2>
                <p>أدخل بياناتك للوصول للنظام</p>
            </div>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="phone">رقم الهاتف</label>
                    <input type="tel" id="phone" name="phone" required placeholder="أدخل رقم الهاتف">
                </div>
                <div class="form-group">
                    <label for="password">كلمة المرور</label>
                    <input type="password" id="password" name="password" required placeholder="أدخل كلمة المرور">
                </div>
                                   <button type="submit" class="btn btn-primary login-btn">
                       <i class="material-icons">login</i>
                       دخول
                   </button>
            </form>
            <div class="login-error" id="loginError"></div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main" id="mainContent" style="display: none;">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="container">
                <div class="section-header">
                    <h2>لوحة التحكم</h2>
                    <p>مرحباً بك في نظام الحسابات المتكامل</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-arrow-up text-success"></i>
                        </div>
                        <div class="stat-content">
                            <h3>إجمالي الدخل</h3>
                            <p class="stat-value" id="totalIncome">0</p>
                            <span class="stat-currency">جنيه مصري</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-arrow-down text-danger"></i>
                        </div>
                        <div class="stat-content">
                            <h3>إجمالي المصروفات</h3>
                            <p class="stat-value" id="totalExpenses">0</p>
                            <span class="stat-currency">جنيه مصري</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users text-primary"></i>
                        </div>
                        <div class="stat-content">
                            <h3>عدد العمال</h3>
                            <p class="stat-value" id="totalWorkers">0</p>
                            <span class="stat-currency">عامل</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-exchange-alt text-warning"></i>
                        </div>
                        <div class="stat-content">
                            <h3>عمليات الاسترجاع</h3>
                            <p class="stat-value" id="totalReturns">0</p>
                            <span class="stat-currency">عملية</span>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h3>إجراءات سريعة</h3>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="showAddModal('income')">
                            <i class="fas fa-plus"></i>
                            إضافة دخل جديد
                        </button>
                        <button class="btn btn-danger" onclick="showAddModal('expenses')">
                            <i class="fas fa-minus"></i>
                            إضافة مصروف جديد
                        </button>
                        <button class="btn btn-success" onclick="showAddModal('workers')">
                            <i class="fas fa-user-plus"></i>
                            إضافة عامل جديد
                        </button>
                        <button class="btn btn-warning" onclick="showAddModal('returns')">
                            <i class="fas fa-undo"></i>
                            إضافة استرجاع
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Income Section -->
        <section id="income" class="section">
            <div class="container">
                <div class="section-header">
                    <h2>إدارة الدخل</h2>
                    <button class="btn btn-primary" onclick="showAddModal('income')">
                        <i class="fas fa-plus"></i>
                        إضافة دخل جديد
                    </button>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="incomeTable">
                        <thead>
                            <tr>
                                <th>التاريخ</th>
                                <th>المصدر</th>
                                <th>المبلغ</th>
                                <th>العملة</th>
                                <th>طريقة الدفع</th>
                                <th>ملاحظات</th>
                                <th>المستخدم</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="incomeTableBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Expenses Section -->
        <section id="expenses" class="section">
            <div class="container">
                <div class="section-header">
                    <h2>إدارة المصروفات</h2>
                    <button class="btn btn-danger" onclick="showAddModal('expenses')">
                        <i class="fas fa-plus"></i>
                        إضافة مصروف جديد
                    </button>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="expensesTable">
                        <thead>
                            <tr>
                                <th>التاريخ</th>
                                <th>المصدر</th>
                                <th>المبلغ</th>
                                <th>العملة</th>
                                <th>طريقة الدفع</th>
                                <th>ملاحظات</th>
                                <th>المستخدم</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="expensesTableBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Workers Section -->
        <section id="workers" class="section">
            <div class="container">
                <div class="section-header">
                    <h2>إدارة العمال</h2>
                    <button class="btn btn-success" onclick="showAddModal('workers')">
                        <i class="fas fa-plus"></i>
                        إضافة عامل جديد
                    </button>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="workersTable">
                        <thead>
                            <tr>
                                <th>التاريخ</th>
                                <th>اسم العامل</th>
                                <th>المبلغ</th>
                                <th>العملة</th>
                                <th>طريقة الدفع</th>
                                <th>ملاحظات</th>
                                <th>المستخدم</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="workersTableBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Returns Section -->
        <section id="returns" class="section">
            <div class="container">
                <div class="section-header">
                    <h2>إدارة الاسترجاع</h2>
                    <button class="btn btn-warning" onclick="showAddModal('returns')">
                        <i class="fas fa-plus"></i>
                        إضافة استرجاع جديد
                    </button>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="returnsTable">
                        <thead>
                            <tr>
                                <th>التاريخ</th>
                                <th>المصدر</th>
                                <th>المبلغ</th>
                                <th>العملة</th>
                                <th>طريقة الدفع</th>
                                <th>ملاحظات</th>
                                <th>المستخدم</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="returnsTableBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Summary Section -->
        <section id="summary" class="section">
            <div class="container">
                <div class="section-header">
                    <h2>الملخص المالي</h2>
                </div>
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>إجمالي الدخل</h3>
                        <div class="summary-amounts">
                            <div class="amount-item">
                                <span class="currency">جنيه مصري:</span>
                                <span class="amount" id="summaryIncomeEGP">0</span>
                            </div>
                            <div class="amount-item">
                                <span class="currency">دولار أمريكي:</span>
                                <span class="amount" id="summaryIncomeUSD">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="summary-card">
                        <h3>إجمالي المصروفات</h3>
                        <div class="summary-amounts">
                            <div class="amount-item">
                                <span class="currency">جنيه مصري:</span>
                                <span class="amount" id="summaryExpensesEGP">0</span>
                            </div>
                            <div class="amount-item">
                                <span class="currency">دولار أمريكي:</span>
                                <span class="amount" id="summaryExpensesUSD">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="summary-card">
                        <h3>صافي الربح</h3>
                        <div class="summary-amounts">
                            <div class="amount-item">
                                <span class="currency">جنيه مصري:</span>
                                <span class="amount" id="summaryNetEGP">0</span>
                            </div>
                            <div class="amount-item">
                                <span class="currency">دولار أمريكي:</span>
                                <span class="amount" id="summaryNetUSD">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <!-- Add/Edit Modal -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">إضافة جديد</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addForm">
                    <div class="form-group">
                        <label for="date">التاريخ</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                    
                    <div class="form-group" id="sourceGroup">
                        <label for="source">المصدر</label>
                        <input type="text" id="source" name="source" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="amount">المبلغ</label>
                        <input type="number" id="amount" name="amount" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="currency">العملة</label>
                        <select id="currency" name="currency" required>
                            <option value="EGP">جنيه مصري</option>
                            <option value="USD">دولار أمريكي</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="paymentMethod">طريقة الدفع</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                            <option value="نقدي">نقدي</option>
                            <option value="تحويل بنكي">تحويل بنكي</option>
                            <option value="شيك">شيك</option>
                            <option value="بطاقة ائتمان">بطاقة ائتمان</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">ملاحظات</label>
                        <textarea id="notes" name="notes" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="user">المستخدم</label>
                        <input type="text" id="user" name="user" required>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">حفظ</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">إلغاء</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
        <p>جاري التحميل...</p>
    </div>

    <script src="script.js"></script>
</body>
</html>